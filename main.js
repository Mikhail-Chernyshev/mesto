(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._name=n,this._link=r,this._template=document.querySelector(i),this._handleCardClick=o}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return this._template.content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._deleteButton=this._element.querySelector(this._config.cardButtonDelete),this._likeButton=this._element.querySelector(this._config.cardButtonLike),this._cardImage=this._element.querySelector(".element__image"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._link,this._element.querySelector(".element__title").textContent=this._name,this._element}},{key:"getElement",value:function(){return this._element}},{key:"_likeCard",value:function(e){this._likeButton.classList.toggle(this._config.cardButtonLikeActive)}},{key:"_deleteCard",value:function(e){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(t){e._deleteCard(t)})),this._likeButton.addEventListener("click",(function(t){e._likeCard(t)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();const n=t;function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._form=n,this._formButton=this._form.querySelector(this._config.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector))}var t,n;return t=e,(n=[{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showError(e,e.validationMessage)}},{key:"_showError",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t,n.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this._formButton.disabled=!0:this._formButton.disabled=!1}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState(),e._checkInputValidity(t)}))}))}},{key:"disableSubmitButton",value:function(){this._formButton.disabled=!0}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const i=o;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderElements",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._popupCloseButton=this._popup.querySelector(".popup__close"),this._escapeClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._escapeClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._escapeClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closeByOverlayPress",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){return e._closeByOverlayPress(t)})),this._popupCloseButton.addEventListener("click",(function(){e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(e){var t,n=e.popupSelector,r=e.submitCallBack;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._submitCallBack=r,t._form=t._popup.querySelector(".popup__data"),t._inputs=Array.from(t._form.querySelectorAll(".popup__input")),t._submitButton=t._form.querySelector(".popup__delivery"),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"close",value:function(){f(h(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;f(h(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitCallBack(e._getInputValues())}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupBigpicImage=t._popup.querySelector(".popup-bigpic__pic"),t._popupBigpicTitle=t._popup.querySelector(".popup-bigpic__title"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupBigpicTitle.textContent=e,this._popupBigpicImage.src=t,this._popupBigpicImage.alt=e,g(S(u.prototype),"open",this).call(this)}},{key:"close",value:function(){g(S(u.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){g(S(u.prototype),"setEventListeners",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){var n=t.userName,r=t.userInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userInfo=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{username:this._userName.textContent,info:this._userInfo.textContent}}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userInfo.textContent=e.rank}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L={formSelector:".popup__data",inputSelector:".popup__input",submitButtonSelector:".popup__delivery",inactiveButtonClass:"popup__delivery_inactive",popupInputError:".popup__input-error",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active",templateItem:".element-template",cardButtonDelete:".element__trash",cardButtonLike:".element__like",cardButtonLikeActive:"element__like_active",cardList:".elements",cardTextItem:".element__title",cardImageItem:".element__image",cardPopup:".popup-bigpic",cardPopupImage:".popup-bigpic__pic",cardPopupTitle:".popup-bigpic__title",addCardForm:".popup-post__data",deleteCardPopup:".popup-delete__content"},P=document.querySelector(".profile__button-ed-self"),j=(document.querySelector(".element-template"),document.querySelector(".popup-profile__close"),document.querySelector(".popup__input_data_name")),I=document.querySelector(".popup__input_data_rank"),q=document.querySelector(".popup__data_one"),T=document.querySelector(".popup-post__data"),R=document.querySelector(".profile__button-add-self");function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector(".popup-post__input_data_name"),document.querySelector(".popup-post__input_data_rank"),new(function(){function e(t){var n=t.host,r=t.token;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._host=n,this._token=r}var t,n;return t=e,(n=[{key:"getCards",value:function(){return fetch("".concat(this._host,"/cards"),{headers:{authorization:this._token}}).then((function(e){if(e.ok)return e.json();throw new Error("Ошибка при загрузке данных")}))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({host:"https://mesto.nomoreparties.co/v1/cohort-47/",token:"dfd0d591-2c36-49ee-a6dc-331afeedf1bc"}).getCards().then((function(e){var t=new c({data:initialCards,renderer:function(e){t.addItem(F(e))}},".elements");t.renderElements()})),new i(L,q).enableValidation();var D=new i(L,T);D.enableValidation();var V=new B({userName:".profile__name",userInfo:".profile__rank"}),A=new m({popupSelector:".popup-profile",submitCallBack:function(e){V.setUserInfo(e),A.close()}});A.setEventListeners();var N=new m({popupSelector:".popup-post",submitCallBack:function(e){elementList.addItem(F(e)),N.close(),D.disableSubmitButton()}});N.setEventListeners();var U=new O(".popup-bigpic");function z(e,t){U.open(e,t)}function F(e){return new n(L,e.name,e.link,z,".element-template").generateCard()}U.setEventListeners(),P.addEventListener("click",(function(){var e=V.getUserInfo();j.value=e.username,I.value=e.info,A.open()})),R.addEventListener("click",(function(){D.disableSubmitButton(),N.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1osY0FBZSxjQUFlYSxlQUFnQixTQUFDdEIsR0FDckYyRSxZQUFZRSxRQUFRQyxFQUFXOUUsSUFDL0JzRixFQUFVckUsUUFDVmdFLEVBQXFCTSxxQkFDcEIsSUFDREQsRUFBVUQsb0JBRVYsSUFBTUcsRUFBaUIsSUFBSXpELEVBQWUsaUJBZTFDLFNBQVM1RixFQUFnQkYsRUFBTUMsR0FDdkJzSixFQUFlQyxLQUFLeEosRUFBS0MsRUFDMUIsQ0FFUCxTQUFTNEksRUFBWTlFLEdBR2YsT0FGYSxJQUFJakUsRUFBS0MsRUFBUWdFLEVBQUsvRCxLQUFNK0QsRUFBSzlELEtBQU1DLEVBQWlCLHFCQUM1Q3VKLGNBRXhCLENBdEJQRixFQUFlSCxvQkFFZi9CLEVBQVd2RixpQkFBaUIsU0FBUyxXQUM3QixJQUFNaUMsRUFBT2tGLEVBQUtTLGNBQ2xCcEMsRUFBVTVCLE1BQVEzQixFQUFLdUMsU0FDdkJpQixFQUFVN0IsTUFBUTNCLEVBQUt3QyxLQUN2QjJDLEVBQWFNLE1BQ2hCLElBRUw5QixFQUFpQjVGLGlCQUFpQixTQUFTLFdBQ25Da0gsRUFBcUJNLHNCQUNyQkQsRUFBVUcsTUFDYixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy92YXJpYWJsZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICAgY29uc3RydWN0b3IoY29uZmlnLCBuYW1lLCBsaW5rLCBoYW5kbGVDYXJkQ2xpY2ssIHNlbGVjdG9yVGVtcGxhdGUpe1xuICAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgICAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICAgICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclRlbXBsYXRlKTtcbiAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgfVxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl90ZW1wbGF0ZVxuICAgICAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgICB9XG4gICAgIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5jYXJkQnV0dG9uRGVsZXRlKVxuICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuY2FyZEJ1dHRvbkxpa2UpXG4gICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpXG4gICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbGluaztcbiAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICAgfVxuICAgIGdldEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cbiAgICBfbGlrZUNhcmQoZXZ0KSB7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLl9jb25maWcuY2FyZEJ1dHRvbkxpa2VBY3RpdmUpXG4gICAgfVxuICAgIF9kZWxldGVDYXJkKGV2dCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gICAgfSBcblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHsgICAgIFxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiAge1xuICAgICAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZChldnQpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiAge1xuICAgICAgICAgICAgdGhpcy5fbGlrZUNhcmQoZXZ0KVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IFxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXG4gICAgICAgIH0pO1xuICAgIH1cbiB9XG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsIi8vY29uc3QgZm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19kYXRhJylcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuY29uc3RydWN0b3IgKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgLy8gdGhpcy5fZm9ybUlucHV0ID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcilcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcikpO1xufVxuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtSW5wdXQpIHtcbiAgICAgICAgaWYgKCFmb3JtSW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICB0aGlzLl9zaG93RXJyb3IoZm9ybUlucHV0LCBmb3JtSW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm1JbnB1dCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbl9zaG93RXJyb3IoZm9ybUlucHV0LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2Zvcm1JbnB1dC5pZH0tZXJyb3JgKVxuICAgIGZvcm1JbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGZvcm1FcnJvci50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gIFxufVxuX2hpZGVJbnB1dEVycm9yKGZvcm1JbnB1dCkge1xuICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7Zm9ybUlucHV0LmlkfS1lcnJvcmApO1xuICAgIGZvcm1JbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKVxuICAgIGZvcm1FcnJvci50ZXh0Q29udGVudCA9ICcnXG59XG4vLyBfZW5hYmxlU3VibWl0QnV0dG9uIChmb3JtRWwpIHtcbi8vICAgICBjb25zdCBmb3JtQnV0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcilcbi8vICAgICBmb3JtQnV0LmRpc2FibGVkID0gdHJ1ZTtcbi8vIH0zXG5fdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIC8vZm9ybUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fZGVsaXZlcnlfaW5hY3RpdmUnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZm9ybUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvL2Zvcm1CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfX2RlbGl2ZXJ5X2luYWN0aXZlJylcbiAgICAgIH1cbn1cbl9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChmb3JtSW5wdXQpID0+IHtcbiAgICAgICAgcmV0dXJuICFmb3JtSW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gICAgICB9KTtcbiAgICBcbn1cbl9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgIC8vIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICAgIC8vY29uc3QgZm9ybUJ1dCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpXG4gICAgLy90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGZvcm1CdXQpXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGZvcm1JbnB1dCkgPT4ge1xuICAgICAgZm9ybUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtSW5wdXQpO1xuICAgICAgfSk7XG5cbiAgICB9KTtcbn1cbmRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xufVxuZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKClcbiAgICB9XG4gICAgXG59XG5cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvciIsImltcG9ydCBDYXJkIGZyb20gXCIuL0NhcmQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBkYXRhO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICAgIHJlbmRlckVsZW1lbnRzKCl7XG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pXG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGFkZEl0ZW0oZWxlbWVudCl7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXG4gICAgICB9XG59IiwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IgKCBwb3B1cFNlbGVjdG9yICkge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgICAgIHRoaXMuX2VzY2FwZUNsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9lc2NhcGVDbG9zZSlcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjYXBlQ2xvc2UpXG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9XG4gICAgfVxuICAgIF9jbG9zZUJ5T3ZlcmxheVByZXNzKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAvLyB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1wcm9maWxlX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4gdGhpcy5jbG9zZShldnQpKVxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB0aGlzLl9jbG9zZUJ5T3ZlcmxheVByZXNzKGV2dCkpO1xuICAgICAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvciAoIHsgcG9wdXBTZWxlY3Rvciwgc3VibWl0Q2FsbEJhY2sgfSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWl0Q2FsbEJhY2sgPSBzdWJtaXRDYWxsQmFjaztcbiAgICAgICAvLyB0aGlzLl9mb3JtU3VibWl0ID0gdGhpcy5fZm9ybVN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19kYXRhJyk7XG4gICAgICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGVsaXZlcnknKTtcbiAgICB9XG4gICAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRDYWxsQmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG59XG4gICIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gY29uc3RydWN0b3IgKCBwb3B1cFNlbGVjdG9yICkge1xuICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxuICAgICB0aGlzLl9wb3B1cEJpZ3BpY0ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLWJpZ3BpY19fcGljJylcbiAgICAgdGhpcy5fcG9wdXBCaWdwaWNUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1iaWdwaWNfX3RpdGxlJylcbiAgICAgXG4gfVxuIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3BvcHVwQmlncGljVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwQmlncGljSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEJpZ3BpY0ltYWdlLmFsdCA9IG5hbWU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbn1cbmNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgIH1cbnNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiB9XG4iLCIvLyBpbXBvcnQge3Byb2ZpbGVUaXRsZSwgcHJvZmlsZVJhbmt9IGZyb20gJy4uLy4uL3BhZ2VzL2luZGV4LmpzJ1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKCB7IHVzZXJOYW1lLCB1c2VySW5mbyB9ICkge1xuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckluZm8pO1xuICAgIH1cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgY29uc3QgdXNlckluZm8gPSAge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgaW5mbzogdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQsXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gdXNlckluZm9cbiAgICB9XG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQgPSBkYXRhLnJhbms7XG4gICAgfVxufSIsIlxuICBjb25zdCBjb25maWcgPSB7XG4gICAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2RhdGEnLFxuICAgICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2RlbGl2ZXJ5JyxcbiAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fZGVsaXZlcnlfaW5hY3RpdmUnLFxuICAgICAgcG9wdXBJbnB1dEVycm9yOiAnLnBvcHVwX19pbnB1dC1lcnJvcicsXG4gICAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gICAgICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZScsXG4gICAgICB0ZW1wbGF0ZUl0ZW06ICcuZWxlbWVudC10ZW1wbGF0ZScsXG4gICAgICBjYXJkQnV0dG9uRGVsZXRlOiAnLmVsZW1lbnRfX3RyYXNoJyxcbiAgICAgIGNhcmRCdXR0b25MaWtlOiAnLmVsZW1lbnRfX2xpa2UnLFxuICAgICAgY2FyZEJ1dHRvbkxpa2VBY3RpdmU6ICdlbGVtZW50X19saWtlX2FjdGl2ZScsXG4gICAgICBjYXJkTGlzdDogJy5lbGVtZW50cycsXG4gICAgICBjYXJkVGV4dEl0ZW06ICcuZWxlbWVudF9fdGl0bGUnLFxuICAgICAgY2FyZEltYWdlSXRlbTogJy5lbGVtZW50X19pbWFnZScsXG4gICAgICBjYXJkUG9wdXA6ICcucG9wdXAtYmlncGljJyxcbiAgICAgIGNhcmRQb3B1cEltYWdlOiAnLnBvcHVwLWJpZ3BpY19fcGljJyxcbiAgICAgIGNhcmRQb3B1cFRpdGxlOiAnLnBvcHVwLWJpZ3BpY19fdGl0bGUnLFxuICAgICAgYWRkQ2FyZEZvcm06ICcucG9wdXAtcG9zdF9fZGF0YScsXG4gICAgICBkZWxldGVDYXJkUG9wdXA6ICcucG9wdXAtZGVsZXRlX19jb250ZW50JyxcbiAgfVxuICBjb25zdCBlbGVtZW50TGlzdFNlbGVjdG9yID0gKCcuZWxlbWVudHMnKVxuICBjb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1lZC1zZWxmJylcbiAgY29uc3QgZWxlbWVudFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQtdGVtcGxhdGUnKVxuICBjb25zdCBidXR0b25DbG9zZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXByb2ZpbGVfX2Nsb3NlJylcbiAgY29uc3QgcG9wdXBOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9kYXRhX25hbWUnKVxuICBjb25zdCBwb3B1cFJhbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2RhdGFfcmFuaycpXG4gIGNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGF0YV9vbmUnKVxuICBjb25zdCBmb3JtQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1wb3N0X19kYXRhJylcbiAgY29uc3QgYnV0dG9uQWRkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tYWRkLXNlbGYnKVxuICBjb25zdCBwb3B1cFBvc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBvc3RfX2lucHV0X2RhdGFfbmFtZScpXG5jb25zdCBwb3B1cFBvc3RSYW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBvc3RfX2lucHV0X2RhdGFfcmFuaycpXG5leHBvcnQgeyBjb25maWcsIGVsZW1lbnRMaXN0U2VsZWN0b3IsIGJ1dHRvbkVkaXQsZWxlbWVudFRlbXBsYXRlLCBidXR0b25DbG9zZVBvcHVwLCBwb3B1cE5hbWUsIHBvcHVwUmFuaywgZm9ybUVkaXRQcm9maWxlLCBmb3JtQWRkQ2FyZCxidXR0b25BZGRFbGVtZW50LCBwb3B1cFBvc3ROYW1lLCBwb3B1cFBvc3RSYW5rfTsiLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBjb25maWcsIGVsZW1lbnRMaXN0U2VsZWN0b3IsIGJ1dHRvbkVkaXQsIGVsZW1lbnRUZW1wbGF0ZSwgYnV0dG9uQ2xvc2VQb3B1cCwgcG9wdXBOYW1lLCBwb3B1cFJhbmssIGZvcm1FZGl0UHJvZmlsZSwgZm9ybUFkZENhcmQsIGJ1dHRvbkFkZEVsZW1lbnQsIHBvcHVwUG9zdE5hbWUsIHBvcHVwUG9zdFJhbmsgfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL3ZhcmlhYmxlLmpzJ1xuaW1wb3J0IEFwaSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGhvc3Q6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ny9cIixcbiAgdG9rZW46IFwiZGZkMGQ1OTEtMmMzNi00OWVlLWE2ZGMtMzMxYWZlZWRmMWJjXCIsXG59KTtcbmFwaS5nZXRDYXJkcygpXG4udGhlbigoaXRlbXMpID0+IHtcbiAgY29uc3QgZWxlbWVudExpc3QgPSBuZXcgU2VjdGlvbih7IGRhdGE6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IChpdGVtKSA9PiB7IC8v0YHQvtC30LTQsNC10Lwg0YHQv9C40YHQvtC6INC60LDRgNGC0L7Rh9C10Log0YfQtdGA0LXQtyDRgNC10L3QtNC10YAg0LrQu9Cw0YHRgdCwINCh0LXQutGI0L1cbiAgICBlbGVtZW50TGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpOyAgICAvL9C60LDQttC00YPRjiDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMg0LTQvtCx0LDQstC70Y/QtdC8INCyINGN0YLQvtGCINGB0L/QuNGB0L7QulxufSB9LCBlbGVtZW50TGlzdFNlbGVjdG9yKTsgXG5lbGVtZW50TGlzdC5yZW5kZXJFbGVtZW50cygpOyAvL9Cy0YvQs9GA0YPQttCw0LXQvCDQutCw0YDRgtC+0YfQutC4INC40Lcg0LzQsNGB0YHQuNCyXG59KVxuXG5jb25zdCBmb3JtRWRpdFByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FZGl0UHJvZmlsZSkvLyDRgdC+0LfQtNCw0LXQvCDQstCw0LvQuNC00LDRhtC40Y4g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuZm9ybUVkaXRQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKS8v0LfQsNC/0YPRgdC60LDQtdC8INCy0LDQu9C40LTQsNGG0LjRjiDQsiDQvdGR0LxcblxuY29uc3QgZm9ybUFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1BZGRDYXJkKS8v0YHQvtC30LTQsNGR0Lwg0LLQsNC70LjQtNCw0YbQuNGOINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZm9ybUFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpLy/RgtCw0LrQttC1INC30LDQv9GD0YHQutCw0LXQvCDQstCw0LvQuNC00LDRhtC40Y4sINC30LAg0LrQvtGC0L7RgNGD0Y4g0L7RgtCy0LXRh9Cw0LXRgiDQvNC10YLQvtC0INGN0L3RjdC50LHQu9CS0LDQu9C40LTRjdC50YjQvVxuXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHsgdXNlck5hbWU6ICcucHJvZmlsZV9fbmFtZScsIHVzZXJJbmZvOiAnLnByb2ZpbGVfX3JhbmsnfSk7IC8v0YHQvtC30LTQsNGR0Lwg0L/RgNC+0YTQuNC70YxcblxuIGNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCB7IHBvcHVwU2VsZWN0b3I6ICcucG9wdXAtcHJvZmlsZScsIHN1Ym1pdENhbGxCYWNrOiAoZGF0YSkgPT4geyAvL9GB0L7Qt9C00LDQtdC8INC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y9cbnVzZXIuc2V0VXNlckluZm8oZGF0YSkgIC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0LIg0YHRgtGA0LDQvdC40YbRgyDQv9GA0L7RhNC40LvRj1xucHJvZmlsZVBvcHVwLmNsb3NlKCkgLy/Qt9Cw0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQvyDQv9C+0YHQu9C1INGB0LDQsdC80LjRgtCwXG59IH0pXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKS8v0LDQutGC0LjQstC40YDRg9C10LwgINGB0LvRg9GI0LDRgtC10LvQuCDQstC90YPRgtGA0Lgg0L/QvtC/0LDQv1xuXG5jb25zdCBwb3B1cFBvc3QgPSBuZXcgUG9wdXBXaXRoRm9ybSgge3BvcHVwU2VsZWN0b3I6ICcucG9wdXAtcG9zdCcsIHN1Ym1pdENhbGxCYWNrOiAoZGF0YSkgPT4gey8v0YHQvtC30LTQsNC10Lwg0L/QvtC/0LDQvyDQtNC+0LHQu9Cw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lgg0Lgg0L/QtdGA0LXQtNCw0LXQvCDRh9C10YDQtdC3INGB0LDQsdC80LjRgiDQtNCw0YLRgyDRhNC+0YDQvNGLXG5lbGVtZW50TGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpIC8v0L/QvtGB0LvQtSDRgdCw0LHQvNC40YLQsCDQtNC+0LHQsNCy0LvRj9C10Lwg0L3QvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDINCyINGB0L/QuNGB0L7QuiDQutCw0YDRgtC+0YfQtdC6XG5wb3B1cFBvc3QuY2xvc2UoKSAvL9C30LDQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/XG5mb3JtQWRkQ2FyZFZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7IC8v0LLRi9C60LvRjtGH0LDQtdC8INC60L3QvtC/0LrRgyDQvtGC0L/RgNCw0LLQutC4XG59IH0pXG5wb3B1cFBvc3Quc2V0RXZlbnRMaXN0ZW5lcnMoKS8v0LDQutGC0LjQstC40YDRg9C10Lwg0YHQu9GD0YjQsNGC0LXQu9C4INCy0L3Rg9GC0YDQuCDQv9C+0L/QsNC/0LBcblxuY29uc3QgcG9wdXBCaWdwaWNOZXcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cC1iaWdwaWMnKSAvL9GB0L7Qt9C00LDRkdC8INC/0L7Qv9Cw0L8g0YEg0LrQsNGA0YLQuNC90LrQvtC5XG5wb3B1cEJpZ3BpY05ldy5zZXRFdmVudExpc3RlbmVycygpLy/QsNC60YLQuNCy0LjRgNGD0LXQvCDRgdC70YPRiNCw0YLQtdC70LhcblxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gdXNlci5nZXRVc2VySW5mbygpO1xuICAgICAgICBwb3B1cE5hbWUudmFsdWUgPSBkYXRhLnVzZXJuYW1lO1xuICAgICAgICBwb3B1cFJhbmsudmFsdWUgPSBkYXRhLmluZm87XG4gICAgICAgIHByb2ZpbGVQb3B1cC5vcGVuKClcbiAgICB9KSBcblxuYnV0dG9uQWRkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3JtQWRkQ2FyZFZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKClcbiAgICAgICAgcG9wdXBQb3N0Lm9wZW4oKVxuICAgIH0pXG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gICAgICAgIHBvcHVwQmlncGljTmV3Lm9wZW4obmFtZSxsaW5rKVxuICAgICAgfVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkIChkYXRhKSB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoY29uZmlnLCBkYXRhLm5hbWUsIGRhdGEubGluaywgaGFuZGxlQ2FyZENsaWNrLCAnLmVsZW1lbnQtdGVtcGxhdGUnKTtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudFxuICAgICAgfSIsImNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IgKHtob3N0LCB0b2tlbn0pIHtcbiAgICAgICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgfVxuICAgIGdldENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwi0J7RiNC40LHQutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INC00LDQvdC90YvRhVwiKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpOyJdLCJuYW1lcyI6WyJDYXJkIiwiY29uZmlnIiwibmFtZSIsImxpbmsiLCJoYW5kbGVDYXJkQ2xpY2siLCJzZWxlY3RvclRlbXBsYXRlIiwidGhpcyIsIl9jb25maWciLCJfbmFtZSIsIl9saW5rIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9kZWxldGVCdXR0b24iLCJjYXJkQnV0dG9uRGVsZXRlIiwiX2xpa2VCdXR0b24iLCJjYXJkQnV0dG9uTGlrZSIsIl9jYXJkSW1hZ2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImV2dCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNhcmRCdXR0b25MaWtlQWN0aXZlIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVDYXJkIiwiX2xpa2VDYXJkIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2Zvcm0iLCJfZm9ybUJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiZm9ybUlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImZvcm1FcnJvciIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJmb3JFYWNoIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsImRhdGEiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsIl9lc2NhcGVDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX2Nsb3NlQnlPdmVybGF5UHJlc3MiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Q2FsbEJhY2siLCJfc3VibWl0Q2FsbEJhY2siLCJfaW5wdXRzIiwiX3N1Ym1pdEJ1dHRvbiIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBCaWdwaWNJbWFnZSIsIl9wb3B1cEJpZ3BpY1RpdGxlIiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJJbmZvIiwiX3VzZXJOYW1lIiwiX3VzZXJJbmZvIiwidXNlcm5hbWUiLCJpbmZvIiwicmFuayIsImZvcm1TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJwb3B1cElucHV0RXJyb3IiLCJ0ZW1wbGF0ZUl0ZW0iLCJjYXJkTGlzdCIsImNhcmRUZXh0SXRlbSIsImNhcmRJbWFnZUl0ZW0iLCJjYXJkUG9wdXAiLCJjYXJkUG9wdXBJbWFnZSIsImNhcmRQb3B1cFRpdGxlIiwiYWRkQ2FyZEZvcm0iLCJkZWxldGVDYXJkUG9wdXAiLCJidXR0b25FZGl0IiwicG9wdXBOYW1lIiwicG9wdXBSYW5rIiwiZm9ybUVkaXRQcm9maWxlIiwiZm9ybUFkZENhcmQiLCJidXR0b25BZGRFbGVtZW50IiwiQXBpIiwiaG9zdCIsInRva2VuIiwiX2hvc3QiLCJfdG9rZW4iLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIkVycm9yIiwiZ2V0Q2FyZHMiLCJpdGVtcyIsImVsZW1lbnRMaXN0IiwiaW5pdGlhbENhcmRzIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJyZW5kZXJFbGVtZW50cyIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtQWRkQ2FyZFZhbGlkYXRvciIsInVzZXIiLCJwcm9maWxlUG9wdXAiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBQb3N0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsInBvcHVwQmlncGljTmV3Iiwib3BlbiIsImdlbmVyYXRlQ2FyZCIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==